{% extends 'base.html' %} 
{% load static %} {% block head %}
<link rel="stylesheet" href="{% static 'css/parallax.css' %}" />
<link rel="stylesheet" href="{% static 'css/home.css' %}" />
<link rel="stylesheet" href="{% static 'css/UIverse-imports.css' %}" />
{% endblock %} 

{% block content %}

<section class='parallax'>
  <div class="hero-header">
    <div class='hero-image'>
      <img src="{% static 'images/Deal-Hero-Logo.png' %}" alt="Hero Logo" />
    </div>
    <div class="slogan">
      <div class='icon-and-legend'>
        <img src="{% static 'icons/Icon-3-Magnifier.png' %}" alt="Magnifying Glass" />
        <h2>Track</h2>
      </div>  
      <div class='icon-and-legend'>
        <img src="{% static 'icons/Icon-4-VS.png' %}" alt="Versus Icon" />
        <h2>Compare</h2>
      </div>  
      <div class='icon-and-legend'>
        <img src="{% static 'icons/Icon-5-Hero.png' %}" alt="Hero Icon" />
        <h2>Save the Day</h2>
      </div>  
    </div>
    <div class="hero-description">
      <h3>Deal Hero is your superpower to rescue the best deals, at the right time and save BIG on the products you love.</h3>
    </div>
    <div class="start-now-container">
      <h2>Get Started Now</h2>
      <i class="fa-solid fa-angles-down fa-bounce fa-2xl" style="color: #FFD43B; margin-inline: auto; width: 80px; --fa-animation-delay: 6s; --fa-animation-iteration-count: 10"></i>
      {% include "partials/search_box.html" %}
      <h2>...or browse these amazing deals</h2>
      <i class="fa-solid fa-angles-down fa-bounce fa-2xl" style="color: #FFD43B; margin-inline: auto; width: 80px; --fa-animation-delay: 6s; --fa-animation-iteration-count: 10"></i>
    </div>
  </div>
  <img class="parallax__sky" src="../static/images/BG 1 - Sky.png" alt="Sky background" />
  <img class="parallax__moon" src="../static/images/BG 3 - Moon.png" alt="Moon background" />
  <img class="parallax__big_cloud" src="../static/images/BG 4 - Big Cloud.png" alt="Clouds background" />
  <img class="parallax__small_cloud" src="../static/images/BG 5 - Small Cloud.png" alt="Clouds background" />
  <img class="parallax__buildings" src="../static/images/BG 6 - Buildings.png" alt="Buildings background" />
</section>

<section id="main-content">
  <div class="category-selector">
    <form method="POST" action="{% url 'deals' %}">
      {% csrf_token %}
      <label for="category">Select Category:</label>
      <select name="category" id="category">
        <option value="Electronics" selected>Electronics</option>
        <option value="Books">Books</option>
        <option value="Clothing">Clothing</option>
        <option value="Computers">Computers</option>
        <option value="Kids">Kids</option>
        <option value="Garden">Garden</option>
        <option value="Food">Food</option>
        <option value="Men">Men</option>
        <option value="Pet Supplies">Pet Supplies</option>
        <option value="Pharmacy">Pharmacy</option>
        <option value="Prime exclusives">Prime Exclusives</option>
        <option value="smart home">Smart Home</option>
        <option value="Sports">Sports</option>
        <option value="Women">Women</option>
        <option value="Whole Foods">Whole Foods</option>
        <!-- Add more categories -->
      </select>
      <button type="submit" class="btn">Fetch Deals</button>
    </form>
  </div>

  <div class="deals-container">
    <h2>Biggest Deals of the Day</h2>
    <h3>Sorted by percentage savings.</h3>
    {% if deals_of_the_day %}
      <div class='other-options-carousel snaps-inline'>
        {% for deal in deals_of_the_day %}
        <div class='product-card'>
          <div class="product-titles">
            <h3>{{ deal.title }}</h3>
          </div>
          <div class="product-img-container">
            <img class="product-image" src="{{ deal.url_image }}" alt="{{ deal.title }}">
            <h3 class="savings-stamp">-{{deal.discount}}%</h3>
          </div>
          <div class="product-description">
            <div class="logo-container">
              <a href="https://www.amazon.com{{ deal.url }}" target="_blank"><img  class="merchant-logo" src="{{ deal.logo_url }}" alt="Amazon logo" width="80"></a>
              <a href="https://www.amazon.com{{ deal.url }}" target="_blank">View on Amazon</a>
            </div>
                <div class="description-text">
                  <p style="font-size: larger"><strong>${{ deal.price }} </strong><span style="color: #faf0f0; font-size: medium"><em>List: $<del>{{ deal.strike_through_price }}</del></span></em></p>
                    <p><span style="color: #faf0f0; font-size: small;"><svg viewBox="0 0 1000 200" class='rating'>
                        <defs>
                            <polygon id="star" points="100,0 131,66 200,76 150,128 162,200 100,166 38,200 50,128 0,76 69,66 "/>
                            <clipPath id="stars">
                                <use xlink:href="#star"/>
                                <use xlink:href="#star" x="20%"/>
                                <use xlink:href="#star" x="40%"/>
                                <use xlink:href="#star" x="60%"/>
                                <use xlink:href="#star" x="80%"/>
                            </clipPath>
                        </defs>
                        <rect class='rating__background' clip-path="url(#stars)"></rect>
                        <rect width="{{ deal.rating_width }}%" class='rating__value' clip-path="url(#stars)"></rect>
                    </svg> ({{ deal.reviews_count }})</span></p>
                    <p><strong>Save: </strong><span style="color: #faf0f0;">{{ deal.discount }}%</span></p>
                    <p><strong>Rating: </strong><span style="color: #faf0f0;">{{ deal.rating }}</span></p>
                    {% if deal.best_seller %}
                        <p><strong>Best Seller</strong></p>
                    {% endif %}
                    {% if deal.is_amazons_choice %}
                        <p><strong>Amazon's Choice</strong></p>
                    {% endif %}
                    <form action="{% url 'add-to-wishlist' deal.asin %}" method="post">
                        {% csrf_token %} 
                        {% include "partials/add_to_wishlist_btn.html" %}
                    </form>
                  </div>
          </div>
        </div>
        {% endfor %}
      </div>
    {% else %}
      <p>No deals available at the moment.</p>
    {% endif %}
  </div>
</section>

{% endblock %}